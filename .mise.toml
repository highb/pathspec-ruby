[tools]
ruby = "3.4.1"
"gem:bundler" = "4.0.3"

[tasks.install]
run = "bundle install"
description = "Install gem dependencies"

[tasks.test]
run = "bundle exec rake"
description = "Run rubocop, unit tests, integration tests, and docs"

[tasks."test:unit"]
run = "bundle exec rake spec"
description = "Run unit tests only"

[tasks."test:integration"]
run = "bundle exec rake spec_integration"
description = "Run integration tests only"

[tasks."test:all"]
run = "bundle exec rake spec_all"
description = "Run all tests (unit + integration)"

[tasks."test:matrix"]
run = "bundle exec rake test_matrix"
description = "Run tests across all Ruby versions in Docker"

[tasks.build]
run = "gem build pathspec.gemspec"
description = "Build the gem"

[env]
# Ensure bundler uses the project's vendor/bundle directory
_.file = ".env"
